document.addEventListener("DOMContentLoaded",(function(){const e={$el:e=>document.querySelector(e),setState:()=>{sessionStorage.setItem("state",JSON.stringify(e.$el(".index-main").innerHTML))},clearState:()=>{sessionStorage.removeItem("state")},initStateLinks:()=>{setTimeout(()=>{document.querySelectorAll(".state-link").forEach(t=>t.addEventListener("click",()=>{e.setState()}))},1e3)},isState:()=>!!sessionStorage.getItem("state"),isDesktop:()=>window.innerWidth>=996,expandPrimarySection:t=>{const s=e.$el(".section-slider"),i=s.querySelector('[data-name="about"]'),l=s.querySelector('[data-name="hobby"]'),n=s.querySelector('[data-name="projects"]'),o=s.querySelector('[data-name="media"]'),a=t.querySelector(`[data-position-${t.dataset.name}="outer"]`),r=t.querySelectorAll(`[data-position-${t.dataset.name}="inner"]`);switch(e.initStateLinks(),t.style.width="100%",t.dataset.name){case"about":l.style.left="100%",n.style.right="-50%",o.style.right="-70%",t.addEventListener("transitionend",(function(){t.querySelector(".slide-1").classList.add("slide-1__scrolled"),t.querySelector(".slide-3").classList.add("slide-3__scrolled")}));break;case"hobby":i.style.left="-25%",t.style.left=0,n.style.right="-25%",o.style.right="-50%",r.forEach(e=>e.style.display="none"),t.addEventListener("transitionend",(function(){t.querySelector(".slide-1").classList.add("slide-1__scrolled"),t.querySelector(".section-name").classList.add("section-name__scrolled"),t.querySelector(".slide-2").classList.add("slide-2__scrolled")})),t.addEventListener("animationend",(function(){a.style.display="none",r.forEach(e=>{e.style.display="block"})}));break;case"projects":i.style.left="-50%",l.style.left="-25%",t.style.right=0,o.style.right="-25%",r.forEach(e=>e.style.display="none"),t.addEventListener("transitionend",(function(){t.querySelector(".slide-2").classList.add("slide-2__scrolled"),t.querySelector(".section-name").classList.add("section-name__scrolled")})),t.addEventListener("animationend",(function(){a.style.display="none",r.forEach(e=>e.style.display="block")}));break;case"media":i.style.left="-75%",l.style.left="-50%",n.style.right="100%",t.addEventListener("transitionend",(function(){t.querySelector(".slide-1").classList.add("slide-1__scrolled"),t.querySelector(".slide-2").classList.add("slide-2__scrolled")})),t.querySelector(".slide-2").addEventListener("animationend",(function(){}))}sessionStorage.setItem("order",t.dataset.order)},expandPrimarySectionOnDesktop:t=>{const s=e.$el(".section-slider-desktop"),i=s.querySelector('[data-name="about"]'),l=s.querySelector('[data-name="hobby"]'),o=s.querySelector('[data-name="projects"]'),r=s.querySelector('[data-name="media"]');switch(a("#desktopVerticalTextSlider"),n(".hobbydesktop-","auto"),n(".projectsdesktop-","auto"),n(".mediadesktop-","auto"),t.style.width="95%",sessionStorage.setItem("order",t.dataset.order),t.dataset.name){case"about":t.querySelector(".section-desktop__content").style.right="calc(100% - 413px)",i.style.left="2.5%",l.style.left="97.5%",o.style.right="-25%",r.style.right="-90%";break;case"hobby":t.querySelector(".section-desktop__content").style.left="0px",i.style.left="-30%",l.style.left="2.5%",o.style.right="-10%",r.style.right="-40%";break;case"projects":t.querySelector(".section-name").style.left="0",i.style.left="-50%",l.style.left="-20%",o.style.right="2.5%",r.style.right="-30%";break;case"media":i.style.left="-60%",l.style.left="-30%",o.style.right="97.5%",r.style.right="2.5%"}e.initStateLinks()},changePage:t=>{t.preventDefault(),e.$el("main").classList.add("page-changing"),e.clearState(),setTimeout(()=>window.location.href=t.target.href,700)},checkIsActiveLink:e=>{e.classList.add("active"),e.previousElementSibling.classList.add("active-divider")}},t=document.getElementById("animationsPolygon"),s=document.getElementById("hamburgerSection"),i=e.$el(".primary"),l=e.$el(".news"),n=(e,t=2,s=20,i=!0)=>new Swiper(e,{direction:"vertical",loop:!1,slidesPerView:t,spaceBetween:Number(s),preloadImages:!1,lazy:!0,scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=500;this.slides.forEach((t,s)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:e.slice(0,e.indexOf("-"))+"-next",prevEl:e.slice(0,e.indexOf("-"))+"-prev",lockClass:"d-none"}}),o=e=>{new Swiper(".primary-swiper-desktop",{slidesPerView:"auto",spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!0,initialSlide:Number(e),keyboard:{enabled:!0,onlyInViewport:!0},on:{afterInit:function(){document.querySelectorAll(".section-desktop").forEach(e=>e.style.cursor="grab")},slideChange:function(){const{activeIndex:e}=this;sessionStorage.setItem("order",this.slides[e].dataset.swiperSlideIndex),this.slides.forEach((t,s)=>{s===e?t.querySelector(".active-content").classList.remove("active-content__inactive"):t.querySelector(".active-content").classList.add("active-content__inactive")})}}})},a=e=>new Swiper(e,{direction:"vertical",slidesPerView:"auto",freeMode:!0,scrollbar:{el:".swiper-scrollbar"},navigation:{nextEl:".vertical-text-next",prevEl:".vertical-text-prev ",lockClass:"d-none"},mousewheel:!0});let r=!1;const d=setInterval(()=>{s.querySelector(".active")&&e.$el(".hamburger__section__finally_opened")&&(e.checkIsActiveLink(e.$el(".active")),r=!0),r&&clearInterval(d)},100);t.insertAdjacentElement("afterbegin",s.cloneNode(!0)),t.querySelector("#hamburgerSection").id="";const c=t.querySelectorAll("a");if(c.forEach((e,t)=>{t!==c.length-1&&(e.style.width="auto",e.style.visibility="visible")}),document.querySelectorAll(".logo__wrapper").forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),sessionStorage.removeItem("test"),sessionStorage.removeItem("order"),sessionStorage.removeItem("state"),window.location.href="/"})),e.$el(".desktop-links").querySelectorAll("a").forEach(t=>t.addEventListener("click",(function(t){e.changePage(t)}))),s.addEventListener("click",(function(t){s.classList.add("hamburger__section__opened"),s.addEventListener("animationend",()=>{s.querySelectorAll("a").forEach((t,s)=>{s!==c.length-1&&(t.style.width=c[s].offsetWidth+"px",t.addEventListener("click",(function(t){e.changePage(t)})))}),s.classList.add("hamburger__section__finally_opened"),s.addEventListener("transitionend",()=>{s.querySelectorAll("a").forEach((e,t)=>{e.style.opacity="1"})})})})),i)if(e.isState())e.isDesktop()?(o(sessionStorage.getItem("order")),a("#desktopVerticalTextSlider"),n(".hobbydesktop-","auto"),n(".projectsdesktop-","auto"),n(".mediadesktop-","auto"),e.$el("main").style.opacity="1"):(new Swiper("#innerPrimarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!1,keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){const{activeIndex:e}=this;sessionStorage.setItem("test",this.slides[e].dataset.swiperSlideIndex)}},initialSlide:Number(sessionStorage.getItem("test"))}),a("#mobileVerticalTextSlider"),n(".projects-slider",2,15,!1),n(".hobby-slider",2,15,!1),n(".podcast-slider",2,15,!1),e.$el("main").style.transition="all .25s",setTimeout(()=>e.$el("main").style.opacity="1",1400)),e.initStateLinks(),e.clearState();else{e.$el("main").style.opacity="1";document.getElementById("primarySlider");const t=document.querySelectorAll(".section"),s=e.$el(".section-slider-desktop").querySelectorAll(".section-desktop"),i=document.getElementById("primarySwiperDesktop"),l=e.$el(".inner-section-slider");let r=!1;t.forEach(t=>{t.addEventListener("click",(function(s){if(!r){const s=t.querySelector(".slide-1").nextElementSibling;s.querySelector(".inner-section-slider")||(s.insertAdjacentElement("afterbegin",l.cloneNode(!0)),l.innerHTML=""),e.expandPrimarySection(t),r=!0,setTimeout(()=>{new Swiper("#innerPrimarySlider",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:0,loop:!0,loopedSlides:4,centeredSlides:!1,keyboard:{enabled:!0,onlyInViewport:!0},on:{slideChange:function(){const{activeIndex:e}=this;sessionStorage.setItem("order",this.slides[e].dataset.swiperSlideIndex),sessionStorage.setItem("test",this.slides[e].dataset.swiperSlideIndex)}},initialSlide:Number(t.dataset.inner)})},400),setTimeout(()=>{a("#mobileVerticalTextSlider")},950),setTimeout(()=>{n(".hobby-slider",2,15,!1)},1450),setTimeout(()=>{n(".projects-slider",2,15,!1),n(".podcast-slider",2,15,!1)},1700)}}))}),s.forEach(t=>{t.addEventListener("click",(function(){o(t.dataset.order),e.expandPrimarySectionOnDesktop(t),t.addEventListener("transitionend",()=>{i.style.top="0",setTimeout(()=>{i.classList.add("showed")},350)})}))})}if(e.$el(".black-slider")&&new Swiper(".black-slider",{direction:"vertical",loop:!0,slidesPerView:2,spaceBetween:24,preloadImages:!1,lazy:!0,scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=600;this.slides.forEach((t,s)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".black-slider-next",prevEl:".black-slider-prev",lockClass:"d-none"},breakpoints:{996:{slidesPerView:2}}}),l){let e=200;l.querySelectorAll(".news-item").forEach(t=>{setTimeout(()=>t.style.opacity=1,e),e+=200}),window.addEventListener("load",()=>{new Swiper(".horizontal-desktop-slider",{direction:"vertical",slidesPerView:"auto",spaceBetween:10,loop:!1,breakpoints:{996:{slidesPerView:3,direction:"horizontal",spaceBetween:36}},keyboard:{enabled:!0,onlyInViewport:!0},preloadImages:!1,lazy:!0,mousewheel:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",lockClass:"d-none"}})})}e.$el(".single-page")&&new Swiper(".singlepagedesktop-",{direction:"vertical",loop:!1,slidesPerView:"auto",spaceBetween:20,preloadImages:!1,lazy:!0,scrollbar:{verticalClass:"d-none"},on:{afterInit:function(){let e=500;this.slides.forEach((t,s)=>{setTimeout(()=>{t.style.opacity="1"},e),e+=200})}},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,navigation:{nextEl:".singlepagedesktop-next",prevEl:".singlepagedesktop-prev",lockClass:"d-none"}})}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInV0aWxzIiwiJGVsIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwic2V0U3RhdGUiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJpbm5lckhUTUwiLCJjbGVhclN0YXRlIiwicmVtb3ZlSXRlbSIsImluaXRTdGF0ZUxpbmtzIiwic2V0VGltZW91dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsaW5rIiwiaXNTdGF0ZSIsImdldEl0ZW0iLCJpc0Rlc2t0b3AiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZXhwYW5kUHJpbWFyeVNlY3Rpb24iLCJzZWN0aW9uIiwicHJpbWFyeVdyYXBwZXIiLCJhYm91dCIsImhvYmJ5IiwicHJvamVjdHMiLCJtZWRpYSIsImlubmVyTmFtZSIsImRhdGFzZXQiLCJuYW1lIiwic3R5bGUiLCJ3aWR0aCIsImxlZnQiLCJyaWdodCIsImNsYXNzTGlzdCIsImFkZCIsImZvckVhY2giLCJkaXNwbGF5Iiwib3V0ZXJOYW1lIiwib3JkZXIiLCJleHBhbmRQcmltYXJ5U2VjdGlvbk9uRGVza3RvcCIsImRlc2t0b3BQcmltYXJ5V3JhcHBlciIsImluaXRWZXJ0aWNhbFNsaWRlciIsImluaXRWZXJ0aWNhbFRleHRTbGlkZXIiLCJlIiwibG9jYXRpb24iLCJocmVmIiwidGFyZ2V0IiwiY2hlY2tJc0FjdGl2ZUxpbmsiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZ2V0RWxlbWVudEJ5SWQiLCJwcmltYXJ5Iiwic3BhY2VCZXR3ZWVuIiwiaXNOYXZpZ2F0aW9uIiwiU3dpcGVyIiwiYW5pbWF0aW9uc1BvbHlnb24iLCJoYW1idXJnZXJNZW51Iiwic2xpZGVzUGVyVmlldyIsIk51bWJlciIsInByZWxvYWRJbWFnZXMiLCJzY3JvbGxiYXIiLCJ2ZXJ0aWNhbENsYXNzIiwib24iLCJ0aGlzIiwic2xpZGVzIiwic2xpZGUiLCJuIiwib3BhY2l0eSIsImRlbGF5Iiwia2V5Ym9hcmQiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwic2xpY2UiLCJpbmRleE9mIiwicHJldkVsIiwibG9ja0NsYXNzIiwiaW5pdGlhbFNsaWRlUG9zaWl0b24iLCJsb29wIiwibG9vcGVkU2xpZGVzIiwiY2VudGVyZWRTbGlkZXMiLCJpbml0aWFsU2xpZGUiLCJpbml0RGVza3RvcElubmVyU2xpZGVyIiwiZW5hYmxlZCIsImN1cnNvciIsInNsaWRlQ2hhbmdlIiwiYWN0aXZlSW5kZXgiLCJzd2lwZXJTbGlkZUluZGV4IiwicmVtb3ZlIiwiZGlyZWN0aW9uIiwiZnJlZU1vZGUiLCJlbCIsIm1vdXNld2hlZWwiLCJzZXRJbnRlcnZhbCIsImlzTWFya2VkIiwiY2xlYXJJbnRlcnZhbCIsIm1lbnVJbnRlcnZhbCIsImNsb25lTm9kZSIsImlkIiwiaGVhZGVyTGlua3NDb3B5IiwiYSIsImkiLCJ2aXNpYmlsaXR5IiwibG9nbyIsInByZXZlbnREZWZhdWx0IiwibGVuZ3RoIiwib2Zmc2V0V2lkdGgiLCJjaGFuZ2VQYWdlIiwib25seUluVmlld3BvcnQiLCJ0cmFuc2l0aW9uIiwicHJpbWFyeVNlY3Rpb25zIiwicHJpbWFyeVNsaWRlclNlY3Rpb24iLCJkZXNrdG9wUHJpbWFyeUlubmVyU2xpZGVyIiwiaXNQcmltYXJ5RXhwYW5kZWQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ3cmFwcGVyIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiJGlubmVyU2xpZGVyRWwiLCJpbm5lciIsImRlc2t0b3BQcmltYXJ5U2VjdGlvbnMiLCJ0b3AiLCJsYXp5IiwiYWZ0ZXJJbml0IiwiYnJlYWtwb2ludHMiLCI5OTYiLCJuZXdzIiwiaXRlbSJdLCJtYXBwaW5ncyI6IkFBQUFBLFNBQVNDLGlCQUFpQixvQkFBb0IsV0FDMUMsTUFBTUMsRUFBUSxDQUNQQyxJQUFHQyxHQUFhSixTQUFTSyxjQUFjRCxHQUMxQ0UsU0FBVSxLQUNOQyxlQUFlQyxRQUFRLFFBQWNDLEtBQUFBLFVBQWdCTixFQUFJ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bGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB1dGlscyA9IHtcclxuICAgICAgICAkZWw6IChzZWxlY3RvcikgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvciksXHJcbiAgICAgICAgc2V0U3RhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc3RhdGUnLCBKU09OLnN0cmluZ2lmeSh1dGlscy4kZWwoJy5pbmRleC1tYWluJykuaW5uZXJIVE1MKSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsZWFyU3RhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnc3RhdGUnKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5pdFN0YXRlTGlua3M6ICgpID0+IHtcclxuICAgICAgICAgICAgLy8g0KHRgdGL0LvQutC4LCDQv9GA0Lgg0LrQu9C40LrQtSDQvdCwINC60L7RgtC+0YDRi9GFINGB0L7RhdGA0LDQvdGP0LXRgtGB0Y8g0YHQvtGB0YLQvtGP0L3QuNC1INGE0YDQvtC90YLQsCDQvdCwINCz0LvQsNCy0L3QvtC5INGB0YLRgNCw0L3QuNGG0LVcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZUxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0YXRlLWxpbmsnKVxyXG4gICAgICAgICAgICAgICAgc3RhdGVMaW5rcy5mb3JFYWNoKGxpbmsgPT4gbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1dGlscy5zZXRTdGF0ZSgpXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgfSwgMTAwMClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzU3RhdGU6ICgpID0+ICEhc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc3RhdGUnKSxcclxuICAgICAgICBpc0Rlc2t0b3A6ICgpID0+IHdpbmRvdy5pbm5lcldpZHRoID49IDk5NixcclxuICAgICAgICBleHBhbmRQcmltYXJ5U2VjdGlvbjogKHNlY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJpbWFyeVdyYXBwZXIgPSB1dGlscy4kZWwoJy5zZWN0aW9uLXNsaWRlcicpXHJcbiAgICAgICAgICAgIGNvbnN0IGFib3V0ID0gcHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cImFib3V0XCJdJylcclxuICAgICAgICAgICAgY29uc3QgaG9iYnkgPSBwcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lPVwiaG9iYnlcIl0nKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0cyA9IHByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5hbWU9XCJwcm9qZWN0c1wiXScpXHJcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhID0gcHJpbWFyeVdyYXBwZXIucXVlcnlTZWxlY3RvcignW2RhdGEtbmFtZT1cIm1lZGlhXCJdJylcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG91dGVyTmFtZSA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvcihgW2RhdGEtcG9zaXRpb24tJHtzZWN0aW9uLmRhdGFzZXQubmFtZX09XCJvdXRlclwiXWApXHJcbiAgICAgICAgICAgIGNvbnN0IGlubmVyTmFtZSA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtcG9zaXRpb24tJHtzZWN0aW9uLmRhdGFzZXQubmFtZX09XCJpbm5lclwiXWApXHJcbiAgICAgICAgICAgIHV0aWxzLmluaXRTdGF0ZUxpbmtzKClcclxuICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS53aWR0aCA9ICcxMDAlJ1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHNlY3Rpb24uZGF0YXNldC5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhYm91dCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaG9iYnkuc3R5bGUubGVmdCA9ICcxMDAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzLnN0eWxlLnJpZ2h0ID0gJy01MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUucmlnaHQgPSAnLTcwJSdcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTEnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0xX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTMnKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0zX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hvYmJ5JzpcclxuICAgICAgICAgICAgICAgICAgICBhYm91dC5zdHlsZS5sZWZ0ID0gJy0yNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5sZWZ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICctMjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLnJpZ2h0ID0gJy01MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJOYW1lLmZvckVhY2gobmFtZSA9PiBuYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0xJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtMV9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLW5hbWUnKS5jbGFzc0xpc3QuYWRkKCdzZWN0aW9uLW5hbWVfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMicpLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLTJfX3Njcm9sbGVkJylcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRlck5hbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lck5hbWUuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncHJvamVjdHMnOlxyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnLTUwJSdcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJy0yNSUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUucmlnaHQgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUucmlnaHQgPSAnLTI1JSdcclxuICAgICAgICAgICAgICAgICAgICBpbm5lck5hbWUuZm9yRWFjaChuYW1lID0+IG5hbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJylcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNsaWRlLTInKS5jbGFzc0xpc3QuYWRkKCdzbGlkZS0yX19zY3JvbGxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tbmFtZScpLmNsYXNzTGlzdC5hZGQoJ3NlY3Rpb24tbmFtZV9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyTmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyTmFtZS5mb3JFYWNoKG5hbWUgPT4gbmFtZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJylcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVkaWEnOlxyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnLTc1JSdcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJy01MCUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzLnN0eWxlLnJpZ2h0ID0gJzEwMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWVkaWEuc3R5bGUucmlnaHQgPSAnLTEwMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0xJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtMV9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0yJykuY2xhc3NMaXN0LmFkZCgnc2xpZGUtMl9fc2Nyb2xsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGUtMicpLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHt9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ29yZGVyJywgc2VjdGlvbi5kYXRhc2V0Lm9yZGVyKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXhwYW5kUHJpbWFyeVNlY3Rpb25PbkRlc2t0b3A6IChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2t0b3BQcmltYXJ5V3JhcHBlciA9IHV0aWxzLiRlbCgnLnNlY3Rpb24tc2xpZGVyLWRlc2t0b3AnKVxyXG4gICAgICAgICAgICBjb25zdCBhYm91dCA9IGRlc2t0b3BQcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lPVwiYWJvdXRcIl0nKVxyXG4gICAgICAgICAgICBjb25zdCBob2JieSA9IGRlc2t0b3BQcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lPVwiaG9iYnlcIl0nKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGRlc2t0b3BQcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lPVwicHJvamVjdHNcIl0nKVxyXG4gICAgICAgICAgICBjb25zdCBtZWRpYSA9IGRlc2t0b3BQcmltYXJ5V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uYW1lPVwibWVkaWFcIl0nKVxyXG4gICAgICAgICAgICBpbml0VmVydGljYWxUZXh0U2xpZGVyKCcjZGVza3RvcFZlcnRpY2FsVGV4dFNsaWRlcicpXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLmhvYmJ5ZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLnByb2plY3RzZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLm1lZGlhZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUud2lkdGggPSAnOTUlJ1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdvcmRlcicsIHNlY3Rpb24uZGF0YXNldC5vcmRlcilcclxuICAgICAgICAgICAgc3dpdGNoIChzZWN0aW9uLmRhdGFzZXQubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWJvdXQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tZGVza3RvcF9fY29udGVudCcpLnN0eWxlLnJpZ2h0ID0gJ2NhbGMoMTAwJSAtIDQxM3B4KSdcclxuICAgICAgICAgICAgICAgICAgICBhYm91dC5zdHlsZS5sZWZ0ID0gJzIuNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgaG9iYnkuc3R5bGUubGVmdCA9ICc5Ny41JSdcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICctMjUlJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLnJpZ2h0ID0gJy05MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdob2JieSc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1kZXNrdG9wX19jb250ZW50Jykuc3R5bGUubGVmdCA9ICcwcHgnXHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXQuc3R5bGUubGVmdCA9ICctMzAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGhvYmJ5LnN0eWxlLmxlZnQgPSAnMi41JSdcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zdHlsZS5yaWdodCA9ICctMTAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLnJpZ2h0ID0gJy00MCUnXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwcm9qZWN0cyc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1uYW1lJykuc3R5bGUubGVmdCA9ICcwJ1xyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnLTUwJSdcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJy0yMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuc3R5bGUucmlnaHQgPSAnMi41JSdcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5yaWdodCA9ICctMzAlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVkaWEnOlxyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0LnN0eWxlLmxlZnQgPSAnLTYwJSdcclxuICAgICAgICAgICAgICAgICAgICBob2JieS5zdHlsZS5sZWZ0ID0gJy0zMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuc3R5bGUucmlnaHQgPSAnOTcuNSUnXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUucmlnaHQgPSAnMi41JSdcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1dGlscy5pbml0U3RhdGVMaW5rcygpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGFuZ2VQYWdlOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgdXRpbHMuJGVsKCdtYWluJykuY2xhc3NMaXN0LmFkZCgncGFnZS1jaGFuZ2luZycpXHJcbiAgICAgICAgICAgIHV0aWxzLmNsZWFyU3RhdGUoKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZS50YXJnZXQuaHJlZiwgNzAwKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hlY2tJc0FjdGl2ZUxpbms6IChsaW5rKSA9PiB7XHJcbiAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICAgICAgbGluay5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1kaXZpZGVyJylcclxuICAgICAgICB9LFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFuaW1hdGlvbnNQb2x5Z29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuaW1hdGlvbnNQb2x5Z29uJylcclxuICAgIGNvbnN0IGhhbWJ1cmdlck1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGFtYnVyZ2VyU2VjdGlvbicpXHJcbiAgICBjb25zdCBwcmltYXJ5ID0gdXRpbHMuJGVsKCcucHJpbWFyeScpXHJcbiAgICBjb25zdCBuZXdzID0gdXRpbHMuJGVsKCcubmV3cycpXHJcblxyXG4gICAgY29uc3QgaW5pdFZlcnRpY2FsU2xpZGVyID0gKCRlbCwgc2xpZGVzUGVyVmlldyA9IDIsIHNwYWNlQmV0d2VlbiA9IDIwLCBpc05hdmlnYXRpb24gPSB0cnVlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTd2lwZXIoJGVsLCB7XHJcbiAgICAgICAgICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnNcclxuICAgICAgICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogc2xpZGVzUGVyVmlldyxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiBOdW1iZXIoc3BhY2VCZXR3ZWVuKSxcclxuICAgICAgICAgICAgcHJlbG9hZEltYWdlczogZmFsc2UsXHJcbiAgICAgICAgICAgIGxhenk6IHRydWUsXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgdmVydGljYWxDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb246IHtcclxuICAgICAgICAgICAgICAgIGFmdGVySW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxheSA9IDUwMFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzLmZvckVhY2goKHNsaWRlLCBuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgKz0gMjAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gTmF2aWdhdGlvbiBhcnJvd3NcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgJHskZWwuc2xpY2UoMCwgJGVsLmluZGV4T2YoJy0nKSl9LW5leHRgLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBgJHskZWwuc2xpY2UoMCwgJGVsLmluZGV4T2YoJy0nKSl9LXByZXZgLFxyXG4gICAgICAgICAgICAgICAgbG9ja0NsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGluaXREZXNrdG9wSW5uZXJTbGlkZXIgPSAoaW5pdGlhbFNsaWRlUG9zaWl0b24pID0+IHtcclxuICAgICAgICBuZXcgU3dpcGVyKCcucHJpbWFyeS1zd2lwZXItZGVza3RvcCcsIHtcclxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgbG9vcGVkU2xpZGVzOiA0LFxyXG4gICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgICAgICAgaW5pdGlhbFNsaWRlOiBOdW1iZXIoaW5pdGlhbFNsaWRlUG9zaWl0b24pLFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJJbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24tZGVza3RvcCcpLmZvckVhY2goc2VjdGlvbiA9PiBzZWN0aW9uLnN0eWxlLmN1cnNvciA9ICdncmFiJylcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzbGlkZUNoYW5nZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSW5kZXhcclxuICAgICAgICAgICAgICAgICAgICB9ID0gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ29yZGVyJywgdGhpcy5zbGlkZXNbYWN0aXZlSW5kZXhdLmRhdGFzZXQuc3dpcGVyU2xpZGVJbmRleClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9PT0gYWN0aXZlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUtY29udGVudCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS1jb250ZW50X19pbmFjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbGlkZS5xdWVyeVNlbGVjdG9yKCcuaW5hY3RpdmUtY29udGVudCcpLnN0eWxlLm9wYWNpdHkgPSAnMCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUtY29udGVudCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1jb250ZW50X19pbmFjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGluaXRWZXJ0aWNhbFRleHRTbGlkZXIgPSAoJGVsKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTd2lwZXIoJGVsLCB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogXCJ2ZXJ0aWNhbFwiLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBcImF1dG9cIixcclxuICAgICAgICAgICAgZnJlZU1vZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHNjcm9sbGJhcjoge1xyXG4gICAgICAgICAgICAgICAgZWw6IFwiLnN3aXBlci1zY3JvbGxiYXJcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBgLnZlcnRpY2FsLXRleHQtbmV4dGAsXHJcbiAgICAgICAgICAgICAgICBwcmV2RWw6IGAudmVydGljYWwtdGV4dC1wcmV2IGAsXHJcbiAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdXNld2hlZWw6IHRydWUsXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaXNNYXJrZWQgPSBmYWxzZTtcclxuICAgIGNvbnN0IG1lbnVJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBpZiAoaGFtYnVyZ2VyTWVudS5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykgJiYgdXRpbHMuJGVsKCcuaGFtYnVyZ2VyX19zZWN0aW9uX19maW5hbGx5X29wZW5lZCcpKSB7XHJcbiAgICAgICAgICAgIHV0aWxzLmNoZWNrSXNBY3RpdmVMaW5rKHV0aWxzLiRlbCgnLmFjdGl2ZScpKVxyXG4gICAgICAgICAgICBpc01hcmtlZCA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaXNNYXJrZWQgJiYgY2xlYXJJbnRlcnZhbChtZW51SW50ZXJ2YWwpXHJcbiAgICB9LCAxMDApXHJcblxyXG4gICAgLy8g0JrQu9C+0L3QuNGA0YPQtdC8INGI0LDQv9C60YMsINGH0YLQvtCx0Ysg0LLRi9GH0LjRgdC70LjRgtGMINC00LvQuNC90YMg0L/Rg9C90LrRgtC+0LIg0LzQtdC90Y4g0LTQu9GPINC40YUg0L/Qu9Cw0LLQvdC+0Lkg0LDQvdC40LzQsNGG0LjQuFxyXG4gICAgYW5pbWF0aW9uc1BvbHlnb24uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgaGFtYnVyZ2VyTWVudS5jbG9uZU5vZGUodHJ1ZSkpXHJcbiAgICBhbmltYXRpb25zUG9seWdvbi5xdWVyeVNlbGVjdG9yKCcjaGFtYnVyZ2VyU2VjdGlvbicpLmlkID0gJydcclxuICAgIGNvbnN0IGhlYWRlckxpbmtzQ29weSA9IGFuaW1hdGlvbnNQb2x5Z29uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKVxyXG4gICAgaGVhZGVyTGlua3NDb3B5LmZvckVhY2goKGEsIGkpID0+IHtcclxuICAgICAgICBpZiAoaSAhPT0gaGVhZGVyTGlua3NDb3B5Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgYS5zdHlsZS53aWR0aCA9ICdhdXRvJ1xyXG4gICAgICAgICAgICBhLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSdcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sb2dvX193cmFwcGVyJykuZm9yRWFjaChsb2dvID0+IGxvZ28uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd0ZXN0JylcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdvcmRlcicpXHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnc3RhdGUnKVxyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nXHJcbiAgICB9KSlcclxuXHJcbiAgICB1dGlscy4kZWwoJy5kZXNrdG9wLWxpbmtzJykucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2goYSA9PiBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB1dGlscy5jaGFuZ2VQYWdlKGUpXHJcbiAgICB9KSlcclxuXHJcbiAgICBoYW1idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBoYW1idXJnZXJNZW51LmNsYXNzTGlzdC5hZGQoJ2hhbWJ1cmdlcl9fc2VjdGlvbl9fb3BlbmVkJylcclxuICAgICAgICBoYW1idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgaGFtYnVyZ2VyTWVudS5xdWVyeVNlbGVjdG9yQWxsKCdhJykuZm9yRWFjaCgoYSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IGhlYWRlckxpbmtzQ29weS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYS5zdHlsZS53aWR0aCA9IGhlYWRlckxpbmtzQ29weVtpXS5vZmZzZXRXaWR0aCArICdweCdcclxuICAgICAgICAgICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuY2hhbmdlUGFnZShlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGhhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LmFkZCgnaGFtYnVyZ2VyX19zZWN0aW9uX19maW5hbGx5X29wZW5lZCcpXHJcbiAgICAgICAgICAgIGhhbWJ1cmdlck1lbnUuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGhhbWJ1cmdlck1lbnUucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2goKGEsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgICAgICAgICAgICAgIH0pICAgICAgIFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyDQldGB0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QsCDQs9C70LDQstC90L7QuVxyXG4gICAgaWYgKHByaW1hcnkpIHtcclxuICAgICAgICBpZiAodXRpbHMuaXNTdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgIGlmICh1dGlscy5pc0Rlc2t0b3AoKSkge1xyXG4gICAgICAgICAgICAgICAgaW5pdERlc2t0b3BJbm5lclNsaWRlcihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdvcmRlcicpKVxyXG4gICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsVGV4dFNsaWRlcignI2Rlc2t0b3BWZXJ0aWNhbFRleHRTbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuaG9iYnlkZXNrdG9wLScsICdhdXRvJylcclxuICAgICAgICAgICAgICAgIGluaXRWZXJ0aWNhbFNsaWRlcignLnByb2plY3RzZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5tZWRpYWRlc2t0b3AtJywgJ2F1dG8nKVxyXG4gICAgICAgICAgICAgICAgdXRpbHMuJGVsKCdtYWluJykuc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3IFN3aXBlcignI2lubmVyUHJpbWFyeVNsaWRlcicsIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcGVkU2xpZGVzOiA0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmx5SW5WaWV3cG9ydDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gPSB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd0ZXN0JywgdGhpcy5zbGlkZXNbYWN0aXZlSW5kZXhdLmRhdGFzZXQuc3dpcGVyU2xpZGVJbmRleClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxTbGlkZTogTnVtYmVyKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rlc3QnKSksXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsVGV4dFNsaWRlcignI21vYmlsZVZlcnRpY2FsVGV4dFNsaWRlcicpXHJcbiAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wcm9qZWN0cy1zbGlkZXInLCAyLCAxNSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5ob2JieS1zbGlkZXInLCAyLCAxNSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wb2RjYXN0LXNsaWRlcicsIDIsIDE1LCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIHV0aWxzLiRlbCgnbWFpbicpLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIC4yNXMnXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHV0aWxzLiRlbCgnbWFpbicpLnN0eWxlLm9wYWNpdHkgPSAnMScsIDE0MDApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXRpbHMuaW5pdFN0YXRlTGlua3MoKVxyXG4gICAgICAgICAgICB1dGlscy5jbGVhclN0YXRlKClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1dGlscy4kZWwoJ21haW4nKS5zdHlsZS5vcGFjaXR5ID0gJzEnXHJcbiAgICAgICAgICAgIGNvbnN0IHByaW1hcnlTbGlkZXJTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW1hcnlTbGlkZXInKVxyXG4gICAgICAgICAgICBjb25zdCBwcmltYXJ5U2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpXHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2t0b3BQcmltYXJ5V3JhcHBlciA9IHV0aWxzLiRlbCgnLnNlY3Rpb24tc2xpZGVyLWRlc2t0b3AnKVxyXG4gICAgICAgICAgICBjb25zdCBkZXNrdG9wUHJpbWFyeVNlY3Rpb25zID0gZGVza3RvcFByaW1hcnlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLWRlc2t0b3AnKVxyXG4gICAgICAgICAgICBjb25zdCBkZXNrdG9wUHJpbWFyeUlubmVyU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW1hcnlTd2lwZXJEZXNrdG9wJylcclxuICAgICAgICAgICAgY29uc3QgJGlubmVyU2xpZGVyRWwgPSB1dGlscy4kZWwoJy5pbm5lci1zZWN0aW9uLXNsaWRlcicpXHJcblxyXG4gICAgICAgICAgICBsZXQgaXNQcmltYXJ5RXhwYW5kZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vINCe0LHRgNCw0LHQsNGC0YvQstCw0LXQvCDQutC70LjQuiDQvdCwINCz0LvQsNCy0L3QvtC5INCyINC80L7QsdC40LvRjNC90L7QuSDQstC10YDRgdC40LhcclxuICAgICAgICAgICAgcHJpbWFyeVNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJpbWFyeUV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS0xJykubmV4dEVsZW1lbnRTaWJsaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaW5uZXItc2VjdGlvbi1zbGlkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FmdGVyYmVnaW4nLCAkaW5uZXJTbGlkZXJFbC5jbG9uZU5vZGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5uZXJTbGlkZXJFbC5pbm5lckhUTUwgPSAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmV4cGFuZFByaW1hcnlTZWN0aW9uKHNlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJpbWFyeUV4cGFuZGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTd2lwZXIoJyNpbm5lclByaW1hcnlTbGlkZXInLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25seUluVmlld3BvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUNoYW5nZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ID0gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnb3JkZXInLCB0aGlzLnNsaWRlc1thY3RpdmVJbmRleF0uZGF0YXNldC5zd2lwZXJTbGlkZUluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndGVzdCcsIHRoaXMuc2xpZGVzW2FjdGl2ZUluZGV4XS5kYXRhc2V0LnN3aXBlclNsaWRlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsU2xpZGU6IE51bWJlcihzZWN0aW9uLmRhdGFzZXQuaW5uZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRWZXJ0aWNhbFRleHRTbGlkZXIoJyNtb2JpbGVWZXJ0aWNhbFRleHRTbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA5NTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuaG9iYnktc2xpZGVyJywgMiwgMTUsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxNDUwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGluaXRWZXJ0aWNhbFRleHRTbGlkZXIoJyNtb2JpbGVWZXJ0aWNhbFRleHRTbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaW5pdFZlcnRpY2FsU2xpZGVyKCcuaG9iYnktc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSwgMTcwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wcm9qZWN0cy1zbGlkZXInLCAyLCAxNSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0VmVydGljYWxTbGlkZXIoJy5wb2RjYXN0LXNsaWRlcicsIDIsIDE1LCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTcwMClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8g0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INC60LvQuNC6INC90LAg0LPQu9Cw0LLQvdC+0Lkg0LIg0LTQtdGB0LrRgtC+0L/QvdC+0Lkg0LLQtdGA0YHQuNC4XHJcbiAgICAgICAgICAgIGRlc2t0b3BQcmltYXJ5U2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdERlc2t0b3BJbm5lclNsaWRlcihzZWN0aW9uLmRhdGFzZXQub3JkZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMuZXhwYW5kUHJpbWFyeVNlY3Rpb25PbkRlc2t0b3Aoc2VjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2t0b3BQcmltYXJ5SW5uZXJTbGlkZXIuc3R5bGUudG9wID0gJzAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVza3RvcFByaW1hcnlJbm5lclNsaWRlci5jbGFzc0xpc3QuYWRkKCdzaG93ZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzNTApXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh1dGlscy4kZWwoJy5ibGFjay1zbGlkZXInKSkge1xyXG4gICAgICAgIG5ldyBTd2lwZXIoJy5ibGFjay1zbGlkZXInLCB7XHJcbiAgICAgICAgICAgIC8vIE9wdGlvbmFsIHBhcmFtZXRlcnNcclxuICAgICAgICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDI0LFxyXG4gICAgICAgICAgICBwcmVsb2FkSW1hZ2VzOiBmYWxzZSxcclxuICAgICAgICAgICAgbGF6eTogdHJ1ZSxcclxuICAgICAgICAgICAgc2Nyb2xsYmFyOiB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbENsYXNzOiAnZC1ub25lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbjoge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJJbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbGF5ID0gNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXMuZm9yRWFjaCgoc2xpZGUsIG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5zdHlsZS5vcGFjaXR5ID0gJzEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheSArPSAyMDBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBuZXh0RWw6IGAuYmxhY2stc2xpZGVyLW5leHRgLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBgLmJsYWNrLXNsaWRlci1wcmV2YCxcclxuICAgICAgICAgICAgICAgIGxvY2tDbGFzczogJ2Qtbm9uZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgICAgIDk5Njoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV3cykge1xyXG4gICAgICAgIGxldCBkZWxheSA9IDIwMFxyXG4gICAgICAgIG5ld3MucXVlcnlTZWxlY3RvckFsbCgnLm5ld3MtaXRlbScpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gaXRlbS5zdHlsZS5vcGFjaXR5ID0gMSwgZGVsYXkpXHJcbiAgICAgICAgICAgIGRlbGF5ICs9IDIwMFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgU3dpcGVyKCcuaG9yaXpvbnRhbC1kZXNrdG9wLXNsaWRlcicsIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTAsXHJcbiAgICAgICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgOTk2OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDM2LFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25seUluVmlld3BvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcHJlbG9hZEltYWdlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBsYXp5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0RWw6IGAuc3dpcGVyLWJ1dHRvbi1uZXh0YCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2RWw6IGAuc3dpcGVyLWJ1dHRvbi1wcmV2YCxcclxuICAgICAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHV0aWxzLiRlbCgnLnNpbmdsZS1wYWdlJykpIHtcclxuICAgICAgICAvLyBpbml0VmVydGljYWxTbGlkZXIoJy5zaW5nbGVwYWdlZGVza3RvcC0nLCAnYXV0bycpXHJcbiAgICAgICAgbmV3IFN3aXBlcignLnNpbmdsZXBhZ2VkZXNrdG9wLScsIHtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXHJcbiAgICAgICAgICAgIHByZWxvYWRJbWFnZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICBsYXp5OiB0cnVlLFxyXG4gICAgICAgICAgICBzY3JvbGxiYXI6IHtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgICBhZnRlckluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGVsYXkgPSA1MDBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlcy5mb3JFYWNoKChzbGlkZSwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGVsYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ICs9IDIwMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBrZXlib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9ubHlJblZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBOYXZpZ2F0aW9uIGFycm93c1xyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBuZXh0RWw6IGAuc2luZ2xlcGFnZWRlc2t0b3AtbmV4dGAsXHJcbiAgICAgICAgICAgICAgICBwcmV2RWw6IGAuc2luZ2xlcGFnZWRlc2t0b3AtcHJldmAsXHJcbiAgICAgICAgICAgICAgICBsb2NrQ2xhc3M6ICdkLW5vbmUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pIl19
